<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Cosmic Clock — Solar System</title>
<style>
  :root{
    --bg1:#020317;
    --bg2:#07102a;
    --accent:#ffd97a;
    --muted: rgba(255,255,255,0.06);
  }
  html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;color:#e9f6ff;background:linear-gradient(180deg,var(--bg1),var(--bg2));}
  .wrap{position:relative;height:100vh;width:100vw;display:flex;align-items:center;justify-content:center;overflow:hidden}
  canvas{display:block;width:100%;height:100%}
  .hud{position:absolute;left:1rem;top:1rem;z-index:5;background:rgba(0,0,0,0.28);padding:.6rem .85rem;border-radius:10px;backdrop-filter:blur(6px);box-shadow:0 8px 30px rgba(0,0,0,0.6)}
  .hud h1{margin:0;font-size:1rem}
  .hud p{margin:0;font-size:.86rem;color:#cfeefb;opacity:.95}
  .cta{position:absolute;right:1rem;top:1rem;z-index:6;padding:.45rem .7rem;border-radius:8px;background:rgba(0,0,0,0.14);font-size:.82rem}
  .legend{position:absolute;right:1rem;bottom:1rem;z-index:6;padding:.5rem .75rem;border-radius:8px;background:rgba(0,0,0,0.14);font-size:.82rem;color:#cfeefb}
  .credits{position:absolute;left:1rem;bottom:1rem;z-index:6;font-size:.75rem;color:rgba(255,255,255,0.6)}
  @media (max-width:600px){
    .hud h1{font-size:.95rem}
    .legend{font-size:.75rem}
  }
</style>
</head>
<body>
  <div class="wrap" id="wrap">
    <canvas id="c"></canvas>

    <div class="hud">
      <h1>Cosmic Clock — Solar System</h1>
      <p id="timeText">—</p>
    </div>

    <div class="cta">Click/Tap to toggle speed</div>
    <div class="legend">Planets: Hours • Minutes • Seconds</div>
    <div class="credits">Generated for cosmic-clock</div>
  </div>

<script>
(() => {
  const canvas = document.getElementById('c');
  const ctx = canvas.getContext('2d', { alpha: false });
  const DPR = Math.max(1, window.devicePixelRatio || 1);
  let W = 800, H = 600, cx = 400, cy = 300;
  let tick = 0;
  // speed modes (1x = real time)
  const speeds = [1, 8, 32, 128];
  let speedIndex = 0;
  let speed = speeds[speedIndex];

  function onResize(){
    W = canvas.clientWidth | 0;
    H = canvas.clientHeight | 0;
    canvas.width = Math.max(300, W * DPR);
    canvas.height = Math.max(300, H * DPR);
    cx = canvas.width / 2;
    cy = canvas.height / 2;
    ctx.setTransform(DPR,0,0,DPR,0,0);
  }

  // starfield
  const stars = [];
  const STAR_COUNT = 160;
  function initStars(){
    stars.length = 0;
    for(let i=0;i<STAR_COUNT;i++){
      stars.push({
        x: Math.random() * W,
        y: Math.random() * H,
        r: Math.random()*1.8 + 0.2,
        a: Math.random()*0.9 + 0.1,
        tw: Math.random()*0.9 + 0.1
      });
    }
  }

  // planets config: name, baseOrbit, radius, color, orbitalSpeedMultiplier
  // Hours as outer slow orbit, minutes medium, seconds inner fast
  const planetCfg = [
    { name: 'hours', orbitFactor: 0.55, radius: 18, color: '#ffd97a', speedMult: 1/12 },
    { name: 'minutes', orbitFactor: 0.38, radius: 12, color: '#76e4f7', speedMult: 1 },
    { name: 'seconds', orbitFactor: 0.22, radius: 8, color: '#9be88f', speedMult: 60 }
  ];

  function drawStarfield(){
    // subtle gradient background
    const g = ctx.createLinearGradient(0,0,0,H);
    g.addColorStop(0,'#030316');
    g.addColorStop(1,'#07102a');
    ctx.fillStyle = g;
    ctx.fillRect(0,0,W,H);

    // glow behind center
    const glow = ctx.createRadialGradient(cx, cy, 10, cx, cy, Math.max(W,H)*0.6);
    glow.addColorStop(0, 'rgba(255,215,122,0.06)');
    glow.addColorStop(1, 'rgba(0,0,0,0)');
    ctx.fillStyle = glow;
    ctx.fillRect(0,0,W,H);

    // stars
    for(const s of stars){
      ctx.globalAlpha = s.a * (0.5 + 0.5*Math.abs(Math.sin((tick*0.002)*s.tw)));
      ctx.beginPath();
      ctx.fillStyle = '#ffffff';
      ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
      ctx.fill();
    }
    ctx.globalAlpha = 1;
  }

  function drawSun(){
    const sunR = Math.min(W,H) * 0.07;
    // sun glow
    const g = ctx.createRadialGradient(cx, cy, sunR*0.1, cx, cy, sunR*3);
    g.addColorStop(0, 'rgba(255,235,160,0.35)');
    g.addColorStop(0.2, 'rgba(255,200,80,0.18)');
    g.addColorStop(1, 'rgba(0,0,0,0)');
    ctx.fillStyle = g;
    ctx.fillRect(0,0,W,H);

    // sun body
    ctx.beginPath();
    const sunBody = ctx.createRadialGradient(cx - sunR*0.25, cy - sunR*0.25, sunR*0.1, cx, cy, sunR);
    sunBody.addColorStop(0, '#fff1cf');
    sunBody.addColorStop(0.4, '#ffd97a');
    sunBody.addColorStop(1, '#ffb33a');
    ctx.fillStyle = sunBody;
    ctx.arc(cx, cy, sunR, 0, Math.PI*2);
    ctx.fill();

    // subtle corona strokes
    ctx.lineWidth = 2;
    ctx.strokeStyle = 'rgba(255,220,140,0.08)';
    for(let i=0;i<8;i++){
      ctx.beginPath();
      ctx.arc(cx, cy, sunR*(1 + 0.12*i), 0, Math.PI*2);
      ctx.stroke();
    }
  }

  function drawOrbits(now){
    const maxR = Math.min(W,H) * 0.46;
    for(let i=0;i<planetCfg.length;i++){
      const p = planetCfg[i];
      const R = maxR * p.orbitFactor;
      // orbit ring
      ctx.beginPath();
      ctx.strokeStyle = 'rgba(255,255,255,0.04)';
      ctx.lineWidth = 1.2;
      ctx.setLineDash([4,6]);
      ctx.arc(cx, cy, R, 0, Math.PI*2);
      ctx.stroke();
      ctx.setLineDash([]);

      // compute orbital angle per planet using real time but scaled
      let baseProgress = 0;
      if(p.name === 'hours'){
        const h = now.getHours() % 12;
        baseProgress = (h*3600 + now.getMinutes()*60 + now.getSeconds()) / (12*3600);
      } else if(p.name === 'minutes'){
        baseProgress = (now.getMinutes()*60 + now.getSeconds()) / 3600;
      } else if(p.name === 'seconds'){
        baseProgress = (now.getSeconds() + now.getMilliseconds()/1000) / 60;
      }
      // scale by speed and planet-specific multiplier
      const progress = (baseProgress * speed * p.speedMult) % 1;
      const angle = (progress * Math.PI * 2) - Math.PI/2 + (tick*0.00008*(i+1)); // slight natural drift
      const x = cx + Math.cos(angle) * R;
      const y = cy + Math.sin(angle) * R;

      // planet shadow / orbit depth
      ctx.beginPath();
      ctx.fillStyle = 'rgba(0,0,0,0.18)';
      ctx.ellipse(cx + 6, cy + R*0.02 + 6, p.radius*1.05, p.radius*0.45, 0, 0, Math.PI*2);
      ctx.fill();

      // planet body
      ctx.beginPath();
      const grad = ctx.createRadialGradient(x - p.radius*0.4, y - p.radius*0.4, p.radius*0.1, x, y, p.radius*1.4);
      grad.addColorStop(0, '#ffffff');
      grad.addColorStop(0.12, p.color);
      grad.addColorStop(1, '#111827');
      ctx.fillStyle = grad;
      ctx.arc(x, y, p.radius, 0, Math.PI*2);
      ctx.fill();

      // rim highlight
      ctx.lineWidth = 1.2;
      ctx.strokeStyle = 'rgba(255,255,255,0.12)';
      ctx.stroke();

      // trailing glow for minute/second planets
      if(p.name !== 'hours'){
        const trailLen = Math.max(6, Math.round(p.radius*3));
        for(let t=1;t<=trailLen;t++){
          const f = t / trailLen;
          const ax = cx + Math.cos(angle - f*0.08) * R;
          const ay = cy + Math.sin(angle - f*0.08) * R;
          ctx.beginPath();
          ctx.globalAlpha = (1 - f) * 0.12;
          ctx.fillStyle = p.color;
          ctx.arc(ax, ay, Math.max(1, p.radius*(1 - f*0.8)), 0, Math.PI*2);
          ctx.fill();
          ctx.globalAlpha = 1;
        }
      }

      // label small orbit tick (optional)
      // numeric indicator near the planet
      ctx.font = `${Math.max(10, p.radius*0.6)}px Inter, system-ui`;
      ctx.fillStyle = 'rgba(255,255,255,0.9)';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'top';
      const label = p.name === 'hours' ? `${(now.getHours()%12||12)}h` : (p.name === 'minutes' ? `${now.getMinutes()}m` : `${now.getSeconds()}s`);
      ctx.fillText(label, x, y + p.radius + 6);
    }
  }

  function drawCenterInfo(now){
    ctx.save();
    ctx.translate(cx, cy);
    // small core
    const coreR = Math.min(W,H) * 0.055;
    const g = ctx.createRadialGradient(-coreR*0.2, -coreR*0.2, 2, 0,0, coreR);
    g.addColorStop(0, '#fff7e6');
    g.addColorStop(0.5, '#ffd97a');
    g.addColorStop(1, '#ffcc66');
    ctx.fillStyle = g;
    ctx.beginPath();
    ctx.arc(0,0, coreR, 0, Math.PI*2);
    ctx.fill();

    // time text
    ctx.fillStyle = 'rgba(8,6,10,0.9)';
    ctx.beginPath();
    ctx.arc(0,0, coreR*0.65, 0, Math.PI*2);
    ctx.fill();

    ctx.fillStyle = '#ffffff';
    ctx.font = `${Math.max(14, coreR*0.36)}px Inter, system-ui`;
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    const hh = now.getHours().toString().padStart(2,'0');
    const mm = now.getMinutes().toString().padStart(2,'0');
    const ss = now.getSeconds().toString().padStart(2,'0');
    ctx.fillText(`${hh}:${mm}:${ss}`, 0, -coreR*0.05);

    // subtitle
    ctx.font = `${Math.max(10, coreR*0.18)}px Inter, system-ui`;
    ctx.fillStyle = 'rgba(255,255,255,0.8)';
    ctx.fillText(now.toLocaleDateString(undefined, { weekday:'short', month:'short', day:'numeric' }), 0, coreR*0.42);
    ctx.restore();
  }

  function updateHUD(now){
    const el = document.getElementById('timeText');
    el.textContent = now.toLocaleString(undefined, { hour:'2-digit', minute:'2-digit', second:'2-digit' }) + ` — speed x${speed}`;
  }

  function animate(ts){
    tick = ts;
    const now = new Date(Date.now() * speed);
    drawStarfield();
    drawSun();
    drawOrbits(now);
    drawCenterInfo(now);
    updateHUD(new Date());
    requestAnimationFrame(animate);
  }

  // toggle speed
  function toggleSpeed(){
    speedIndex = (speedIndex + 1) % speeds.length;
    speed = speeds[speedIndex];
    document.querySelector('.cta').textContent = `Click/Tap to toggle speed — x${speed}`;
  }

  // init
  function init(){
    onResize();
    initStars();
    window.addEventListener('resize', onResize);
    canvas.addEventListener('click', toggleSpeed);
    canvas.addEventListener('touchstart', e => { e.preventDefault(); toggleSpeed(); }, {passive:false});
    document.addEventListener('DOMContentLoaded', () => { requestAnimationFrame(animate); });
    // also start immediately
    requestAnimationFrame(animate);
  }

  // run
  init();
})();
</script>
</body>
</html>
